.. .. include:: /includes/unicode-checkmark.rst

.. _crafter-marketplace-api-plugin-upload

=============
Upload Plugin
=============

Uploads and registers a plugin. For documentation on plugin contents and structure check the
following link:

.. todo:: Write plugin structure and content doc

--------------------
Resource Information
--------------------

+----------------------------+-------------------------------------------------------------------+
|| HTTP Verb                 || POST                                                             |
+----------------------------+-------------------------------------------------------------------+
|| URL                       || ``/api/1/plugin/upload``                                         |
+----------------------------+-------------------------------------------------------------------+
|| Response Formats          || ``JSON``                                                         |
+----------------------------+-------------------------------------------------------------------+

----------
Parameters
----------

+---------------+-----------------+---------------+----------------------------------------------+
|| Name         || Type           || Required     || Description                                 |
+===============+=================+===============+==============================================+
|| replace      || String         ||              || Replaces an existing plugin with the same   |
||              ||                ||              || name.                                       |
+---------------+-----------------+---------------+----------------------------------------------+
|| file         || Multipart File || |checkmark|  || Plugin file to upload                       |
+---------------+-----------------+---------------+----------------------------------------------+

-------
Example
-------

^^^^^^^^
Requests
^^^^^^^^

``POST .../api/1/plugin/upload``

.. code-block:: guess

	replace=true
	file=myplugin.car

^^^^^^^^
Response
^^^^^^^^

``Status 201 CREATED``

.. code-block:: json

  { "message" : "OK" }

---------
Responses
---------

+---------+----------------------------------+---------------------------------------------------+
|| Status || Location                        || Response Body                                    |
+=========+==================================+===================================================+
|| 201    || ``.../download/:id``            || ``{ "message" : "OK" }``                         |
+---------+----------------------------------+---------------------------------------------------+
|| 400    ||                                 || ``{ "message" : "Invalid request:``              |
||        ||                                 || ``ACTUAL_EXCEPTION" }``                          |
+---------+----------------------------------+---------------------------------------------------+
|| 409    || ``.../download/:id``            || ``{ "message" : "Plugin already exists" }``      |
+---------+----------------------------------+---------------------------------------------------+
|| 500    ||                                 || ``{ "message" : "Internal server error:``        |
||        ||                                 || ``ACTUAL_EXCEPTION" }``                          |
+---------+----------------------------------+---------------------------------------------------+
